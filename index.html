<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>ç¾¤ç›Šä¸­å±± - æŠ•è³‡äººæ ¼æ¸¬é©—</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
/* --- RWD å­—é«”èˆ‡åŸºç¤è¨­å®šå„ªåŒ– START --- */
body {
    font-family:'Microsoft JhengHei',sans-serif;
    background:#f0f2f5;
    margin:0;
    padding:0;
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
    font-size: 16px;
}
.container {
    max-width: 800px;
    margin: 30px auto;
    padding: 30px;
    background: #fff;
    border-radius: 15px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
}
header {
    background:#0a3d62;
    color:white;
    padding:15px;
    text-align:center;
    display:flex; /* ä½¿ç”¨ Flexbox */
    align-items:center; /* å‚ç›´ç½®ä¸­ */
    justify-content:center; /* æ°´å¹³ç½®ä¸­ */
    flex-wrap: wrap; /* å…è¨±é …ç›®æ›è¡Œï¼Œé˜²æ­¢åœ¨å°è¢å¹•ä¸Šæº¢å‡º */
}
header img {
    /* èª¿æ•´ç‚ºæ›´å…·éŸ¿æ‡‰æ€§çš„æœ€å¤§é«˜åº¦ */
    max-height: 45px; /* ç¨å¾®ç¸®å°ä»¥é©æ‡‰æ›´å¤šæƒ…æ³ */
    height: auto; /* ä¿æŒåœ–ç‰‡æ¯”ä¾‹ */
    width: auto; /* ä¿æŒåœ–ç‰‡æ¯”ä¾‹ */
    margin-right:15px;
    /* æ–°å¢ï¼šåœ¨å°è¢å¹•ä¸‹é¿å… Logo éå¤§ */
    flex-shrink: 0; /* é˜²æ­¢ Logo è¢«æ“ å£“éå° */
}
header h1 {
    font-size:1.75rem;
    /* æ–°å¢ï¼šåœ¨å°è¢å¹•ä¸‹å…è¨±æ¨™é¡Œæ–‡å­—æ›è¡Œ */
    flex-shrink: 1; /* å…è¨±æ¨™é¡Œæ–‡å­—ç¸®å° */
    min-width: 0; /* è®“æ–‡å­—åœ¨ flex item ä¸­å¯ä»¥ç¸®å° */
    text-overflow: ellipsis; /* è¶…å‡ºéƒ¨åˆ†é¡¯ç¤ºçœç•¥è™Ÿ */
    white-space: normal; /* å…è¨±æ–‡å­—æ›è¡Œ */
}

/* é‡å°æ‰‹æ©Ÿè¢å¹•çš„åª’é«”æŸ¥è©¢ï¼Œç¸®å° container çš„ margin å’Œ padding */
@media (max-width: 768px) {
    .container {
        margin: 15px;
        padding: 20px;
    }
    header {
        padding: 10px; /* ç¸®å° header padding */
    }
    header img {
        max-height: 40px; /* æ‰‹æ©Ÿä¸Š Logo ç¨å¾®å°ä¸€é» */
        margin-right: 10px;
    }
    header h1 {
        font-size: 1.3rem; /* æ‰‹æ©Ÿä¸Šæ¨™é¡Œå­—é«”ç¸®å° */
        line-height: 1.3; /* æ”¹å–„æ›è¡Œå¾Œçš„è¡Œé«˜ */
    }
    .question {
        font-size: 1.1rem !important;
    }
}
/* --- RWD å­—é«”èˆ‡åŸºç¤è¨­å®šå„ªåŒ– END --- */


.question { font-size:20px; margin-bottom:20px; font-weight:500; }
.options button { 
    display:block; 
    width:100%; 
    margin:10px 0; 
    padding:12px; 
    font-size:1rem; 
    border:none; 
    border-radius:10px; 
    cursor:pointer; 
    background:#3498db; 
    color:white; 
    transition:0.3s; 
    text-align: left; /* è®“é¸é …æ–‡å­—é å·¦å°é½Š */
}
.options button:hover { background:#2c3e50; }
.progress-bar { width:100%; background:#dcdde1; border-radius:10px; overflow:hidden; margin-bottom:10px; height:22px; }
.progress { height:22px; width:0%; background:#27ae60; text-align:center; color:white; line-height:22px; font-weight:bold; transition:0.3s; }
.start-btn { background:#e67e22; color:white; padding:15px 35px; font-size:1rem; border:none; border-radius:12px; cursor:pointer; transition:0.3s; }
.start-btn:hover { background:#d35400; }
.nav-btns { display:flex; justify-content:space-between; margin-top:20px; }
.nav-btns button { padding:10px 20px; font-size:1rem; border:none; border-radius:8px; cursor:pointer; background:#34495e; color:white; transition:0.3s; }
.nav-btns button:hover { background:#2c3e50; }
.result { text-align:center; padding:20px; background:#ecf0f1; border-radius:15px; }
.result h2 { font-size:1.75rem; margin-bottom:10px; color:#2c3e50; }
.result p { font-size:1rem; margin-bottom:20px; color:#34495e; }

/* åœ“é¤…åœ–å®¹å™¨å„ªåŒ–ï¼šç¢ºä¿ Chart.js éŸ¿æ‡‰å¼ç”Ÿæ•ˆ */
#chart-wrapper {
    max-width: 350px;
    margin: 20px auto;
    position: relative;
}
#pieChart { margin:0; display:block; }

#chart-desc { text-align:left; margin-top:15px; }
#chart-desc ul { list-style:none; padding:0; }
#chart-desc li { margin-bottom:8px; font-size:1rem; }
#chart-bars { display:block; margin-top:20px; }
.bar-label { font-weight:bold; margin-bottom:5px; display:flex; justify-content:space-between; font-size:0.9rem; }
.bar-container { display:flex; height:30px; border-radius:8px; overflow:hidden; margin-bottom:15px; }
.bar-segment { display:flex; align-items:center; justify-content:center; color:white; font-weight:bold; font-size: 0.8rem; }
.bar-segment span.percent-text { display: none; }

@media (max-width: 500px) {
    .bar-segment {
        font-size: 0.7rem;
    }
    .bar-label {
        font-size: 0.8rem;
    }
}


.footer { margin-top:30px; font-size:0.85rem; color:#7f8c8d; }
.result-btns { display:flex; justify-content:center; gap:15px; margin-bottom:20px; }
.result-btns button { padding:10px 20px; font-size:1rem; border:none; border-radius:8px; cursor:pointer; background:#e67e22; color:white; transition:0.3s; }
.result-btns button:hover { background:#d35400; }

/* æŠ•è³‡äººæ ¼åˆ†æå€å¡Šçš„æ¨£å¼ */
.analysis-section {
    margin-top: 30px;
    padding: 20px;
    background: #ffffff;
    border-radius: 10px;
    text-align: left;
    box-shadow: 0 4px 10px rgba(0,0,0,0.05);
}
.analysis-section h3 {
    font-size: 1.5rem;
    color: #0a3d62;
    border-bottom: 3px solid #0a3d62;
    padding-bottom: 10px;
    margin-bottom: 20px;
    text-align: center;
}
.analysis-group {
    margin-bottom: 25px;
    padding: 15px;
    border: 1px solid #ddd;
    border-radius: 8px;
    line-height: 1.8;
}
.analysis-group h4 {
    font-size: 1.25rem;
    margin-top: 0;
    color: #2c3e50;
}
.analysis-group p {
    font-size: 0.95rem;
    margin: 5px 0;
}
.analysis-group strong {
    color: #e67e22;
}
</style>
</head>
<body>
<header>
    <img src="https://github.com/a55971258-ai/Mbti-quiz/blob/370f467269e7962d5752a4f3715990d45f7c6a8a/logo.png?raw=true" alt="ç¾¤ç›ŠLogo">
    <h1>ç¾¤ç›Šä¸­å±± - æŠ•è³‡äººæ ¼æ¸¬é©—</h1>
</header>

<div class="container" id="quiz-container">
    <div id="start-screen" style="text-align:center;">
        <h2>æ­¡è¿åƒåŠ ç¾¤ç›Šä¸­å±±æŠ•è³‡äººæ ¼æ¸¬é©—ï¼</h2>
        <button class="start-btn" onclick="startQuiz()">é–‹å§‹æ¸¬é©—</button>
    </div>

    <div id="quiz" style="display:none;">
        <div class="progress-bar">
            <div class="progress" id="progress">0%</div>
        </div>
        <div class="question" id="question-text"></div>
        <div class="options" id="options"></div>
        <div class="nav-btns">
            <button id="prev-btn" onclick="prevQuestion()">ä¸Šä¸€é¡Œ</button>
            <button id="next-btn" onclick="nextQuestion()" style="display:none;">ä¸‹ä¸€é¡Œ</button>
        </div>
    </div>

    <div id="result" style="display:none;" class="result">
        <h2 id="mbti-type"></h2>
        <p id="mbti-desc"></p>

        <div class="result-btns">
            <button onclick="restartQuiz()">å†åšä¸€æ¬¡</button>
            <button onclick="downloadResult()">ä¸‹è¼‰çµæœ</button>
            <button onclick="openLine()">å‚³é€è‡³Line@</button>
        </div>

        <div id="chart-wrapper">
            <canvas id="pieChart" width="350" height="350"></canvas>
        </div>

        <div id="chart-desc"></div>
        <div id="chart-bars"></div>
        <div id="investment-analysis" class="analysis-section">
            <h3>æŠ•è³‡äººæ ¼åˆ†æ</h3>
            <div class="analysis-group" data-mbti="INTJ,INTP,ENTJ,ENTP">
                <h4>ğŸ“Š åˆ†æå‹ï¼ˆINTJã€INTPã€ENTJã€ENTPï¼‰</h4>
                <p>ç¿’æ…£é€éæ•¸æ“šä¾†åˆ¤æ–·æŠ•è³‡æ±ºç­–ï¼Œä»–å€‘ä¸å®¹æ˜“è¢«å¸‚å ´æ³¢å‹•å½±éŸ¿ï¼Œå–œæ­¡ <strong>æœ‰é‚è¼¯ã€æœ‰ç­–ç•¥</strong> çš„æŠ•è³‡æ–¹å¼ï¼Œä¾‹å¦‚INTJ å¯èƒ½æœƒé¸æ“‡ <strong>åƒ¹å€¼æŠ•è³‡</strong>ï¼Œæ·±å…¥ç ”ç©¶ä¼æ¥­è²¡å ±å’Œå¸‚å ´è¶¨å‹¢ï¼Œå†æ±ºå®šæ˜¯å¦é•·æœŸæŒæœ‰ã€‚</p>
                <p>ğŸ“Œ æŠ•è³‡é¢¨æ ¼ï¼šç†æ€§åˆ†æã€æ•¸æ“šé©…å‹•ã€åå‘é•·ç·šæŠ•è³‡ã€‚</p>
                <p>ğŸ“Œ å¸¸è¦‹æŠ•è³‡æ–¹å¼ï¼šåƒ¹å€¼æŠ•è³‡ã€ç§‘æŠ€è‚¡ã€æŒ‡æ•¸å‹åŸºé‡‘ã€‚</p>
                <p>ğŸ” æŠ•è³‡ç†è²¡å»ºè­°ï¼š</p>
                <p>ç†æ€§èˆ‡æ•¸æ“šé©…å‹•çš„æŠ•è³‡æ–¹å¼èƒ½æœ‰æ•ˆé™ä½å¸‚å ´æƒ…ç·’å°æ±ºç­–çš„å½±éŸ¿ï¼Œä½†éåº¦åˆ†æå¯èƒ½å°è‡´éŒ¯å¤±é—œéµæŠ•è³‡æ©Ÿæœƒï¼›å»ºè­°å»ºç«‹æ˜ç¢ºçš„æŠ•è³‡è¨ˆç•«èˆ‡æ±ºç­–æ©Ÿåˆ¶ï¼Œä¾‹å¦‚è¨­å®šè²·è³£æ¢ä»¶ï¼Œé¿å…é™·å…¥ç„¡æ­¢å¢ƒçš„æ•¸æ“šè©•ä¼°ï¼Œå¦å¤–å¯ä»¥é©æ™‚é‹ç”¨å®šæœŸå®šé¡ç­–ç•¥ï¼Œåœ¨ä¸å½±éŸ¿é•·ç·šæŠ•è³‡é‚è¼¯çš„åŒæ™‚ï¼Œæ¸›å°‘é€²å ´æ™‚æ©Ÿçš„å£“åŠ›ï¼Œæé«˜æŠ•è³‡æ•ˆç‡ï¼Œé›–ç„¶åƒ¹å€¼æŠ•è³‡èˆ‡ç§‘æŠ€è‚¡æ˜¯å¼·é …ï¼Œä½†ä¹Ÿå¯é©åº¦é—œæ³¨å¸‚å ´è¶¨å‹¢èˆ‡æ–°èˆˆç”¢æ¥­ï¼Œä»¥ç¢ºä¿è³‡ç”¢é…ç½®èƒ½å…¼é¡§ç©©å¥èˆ‡æˆé•·æ€§ã€‚</p>
            </div>
            <div class="analysis-group" data-mbti="INFJ,INFP,ENFJ,ENFP">
                <h4>ğŸª… å¤–äº¤å‹ï¼ˆINFJã€INFPã€ENFJã€ENFPï¼‰</h4>
                <p>é€™é¡å‹çš„æŠ•è³‡è€…å¸Œæœ›è‡ªå·±çš„æŠ•è³‡èƒ½å¤ ç”¢ç”Ÿç©æ¥µçš„ç¤¾æœƒå½±éŸ¿ï¼Œä¾‹å¦‚é¸æ“‡æŠ•è³‡ <strong>ç’°ä¿ç”¢æ¥­ã€ç¤¾æœƒä¼æ¥­æˆ–æ°¸çºŒç™¼å±•åŸºé‡‘</strong>ï¼Œä½†æ˜¯ä»–å€‘æœ‰æ™‚å¯èƒ½æœƒå¿½ç•¥è²¡å‹™æ•¸æ“šï¼Œè€Œå–®ç´”æ†‘æ„Ÿè¦ºæŠ•è³‡ã€‚</p>
                <p>ğŸ“Œ æŠ•è³‡é¢¨æ ¼ï¼šé‡è¦–ç¤¾æœƒåƒ¹å€¼ã€æ„Ÿæ€§æ±ºç­–ã€è¼ƒå°‘é—œæ³¨ç´°ç¯€ã€‚</p>
                <p>ğŸ“Œ å¸¸è¦‹æŠ•è³‡æ–¹å¼ï¼šESGï¼ˆç’°å¢ƒã€ç¤¾æœƒã€æ²»ç†ï¼‰æŠ•è³‡ã€ç¤¾æœƒè²¬ä»»åŸºé‡‘ã€‚</p>
                <p>ğŸ” æŠ•è³‡ç†è²¡å»ºè­°ï¼š</p>
                <p>é—œæ³¨ç¤¾æœƒåƒ¹å€¼ä¸¦é€éæŠ•è³‡å¯¦ç¾æ­£å‘å½±éŸ¿æ˜¯å¾ˆæœ‰æ„ç¾©çš„ç­–ç•¥ï¼Œä½†è²¡å‹™ç©©å¥åŒæ¨£ä¸å¯å¿½è¦–ï¼›å»ºè­°åœ¨é¸æ“‡ ESG æˆ–ç¤¾æœƒè²¬ä»»æŠ•è³‡æ™‚ï¼Œé™¤äº†è©•ä¼°ä¼æ¥­çš„ç¤¾æœƒå½±éŸ¿åŠ›ï¼Œä¹Ÿè¦é‡è¦–è²¡å‹™æŒ‡æ¨™ï¼Œå¦‚ç‡Ÿæ”¶æˆé•·ã€ç²åˆ©èƒ½åŠ›èˆ‡è³‡ç”¢è² å‚µçµæ§‹ï¼Œä»¥ç¢ºä¿æŠ•è³‡æ¨™çš„å…·å‚™é•·æœŸå¢å€¼æ½›åŠ›ï¼Œæ­¤å¤–å¯è€ƒæ…®æ­é…å¤šå…ƒåŒ–æŠ•è³‡ç­–ç•¥ï¼Œé©åº¦é…ç½®éƒ¨åˆ†è³‡é‡‘è‡³ç§‘æŠ€å‰µæ–°ã€è—ç±Œè‚¡æˆ–ç©©å¥å‹åŸºé‡‘ï¼Œå¹³è¡¡ç†æƒ³èˆ‡è²¡å‹™å›å ±ï¼Œé€™æ¨£æ—¢èƒ½å¯¦ç¾æŠ•è³‡ç†å¿µï¼Œä¹Ÿèƒ½ç¢ºä¿è³‡ç”¢ç©©å®šæˆé•·ï¼Œé”æˆé•·æœŸè²¡å‹™ç›®æ¨™ã€‚</p>
            </div>
            <div class="analysis-group" data-mbti="ISTJ,ISFJ,ESTJ,ESFJ">
                <h4>ğŸ©· å®ˆè­·å‹ï¼ˆISTJã€ISFJã€ESTJã€ESFJï¼‰</h4>
                <p>é€™é¡å‹çš„æŠ•è³‡è€…æ³¨é‡å®‰å…¨æ„Ÿï¼Œä¸å–œæ­¡éå¤§çš„å¸‚å ´æ³¢å‹•ï¼Œé€šå¸¸æœƒé¸æ“‡ç©©å®šå‹è³‡ç”¢ï¼Œå¦‚è—ç±Œè‚¡ã€é«˜è‚¡æ¯ ETF æˆ–å‚µåˆ¸ï¼Œä¸¦é€é <strong>å®šæœŸå®šé¡</strong> ç©ç´¯è²¡å¯Œã€‚</p>
                <p>ğŸ“Œ æŠ•è³‡é¢¨æ ¼ï¼šä¿å®ˆç©©å¥ã€é•·æœŸè¦åŠƒã€é¢¨éšªä½ã€‚</p>
                <p>ğŸ“Œ å¸¸è¦‹æŠ•è³‡æ–¹å¼ï¼š ETFã€å‚µåˆ¸ã€å®šæœŸå®šé¡ã€‚</p>
                <p>ğŸ” æŠ•è³‡ç†è²¡å»ºè­°ï¼š</p>
                <p>ç©©å¥æŠ•è³‡èƒ½å¸¶ä¾†é•·æœŸçš„è²¡å‹™å®‰å…¨ï¼Œä½†é©åº¦æå‡è³‡ç”¢çš„æˆé•·æ€§ï¼Œæœ‰åŠ©æ–¼æé«˜æ•´é«”æŠ•è³‡å ±é…¬ç‡ï¼›å»ºè­°åœ¨ä¿æŒæ ¸å¿ƒç©©å®šè³‡ç”¢ï¼ˆå¦‚é«˜è‚¡æ¯ ETFã€å‚µåˆ¸ï¼‰çš„åŒæ™‚ï¼Œé©é‡é…ç½®éƒ¨åˆ†è³‡é‡‘è‡³æˆé•·å‹æ¨™çš„ï¼Œå¦‚ç§‘æŠ€è‚¡ã€æ–°èˆˆå¸‚å ´åŸºé‡‘æˆ–ç”¢æ¥­è¶¨å‹¢å‹æŠ•è³‡ï¼Œé€™æ¨£å¯ä»¥åœ¨å¯æ§é¢¨éšªå…§ï¼Œæé«˜è³‡ç”¢çš„å¢å€¼æ½›åŠ›ï¼Œå¦å¤–é€éå‹•æ…‹èª¿æ•´æŠ•è³‡çµ„åˆï¼Œæ ¹æ“šå¸‚å ´è®ŠåŒ–èˆ‡å€‹äººè²¡å‹™ç›®æ¨™é©æ™‚å„ªåŒ–é…ç½®ï¼Œèƒ½è®“ä½ çš„æŠ•è³‡æ›´å…·å½ˆæ€§ï¼Œå…¼é¡§å®‰å…¨æ€§èˆ‡æˆé•·æ€§ã€‚</p>
            </div>
            <div class="analysis-group" data-mbti="ISTP,ISFP,ESTP,ESFP">
                <h4>ğŸ¢ æ¢éšªå‹ï¼ˆISTPã€ISFPã€ESTPã€ESFPï¼‰</h4>
                <p>é€™é¡å‹çš„äººç†±æ„›æŒ‘æˆ°èˆ‡åˆºæ¿€ï¼Œåœ¨æŠ•è³‡å¸‚å ´ä¸Šå®¹æ˜“è¿½æ±‚é«˜é¢¨éšªã€é«˜å ±é…¬çš„æ©Ÿæœƒï¼Œä¾‹å¦‚ <strong>çŸ­ç·šäº¤æ˜“ã€åŠ å¯†è²¨å¹£æˆ–å‰µæŠ•åŸºé‡‘</strong>ï¼Œç„¶è€Œä»–å€‘ä¹Ÿå®¹æ˜“è¡å‹•æ±ºç­–ï¼Œå¿½ç•¥é¢¨éšªæ§ç®¡ã€‚</p>
                <p>ğŸ“Œ æŠ•è³‡é¢¨æ ¼ï¼šéˆæ´»æ‡‰è®Šã€çŸ­ç·šäº¤æ˜“ã€å‹‡æ–¼å†’éšªã€‚</p>
                <p>ğŸ“Œ å¸¸è¦‹æŠ•è³‡æ–¹å¼ï¼šçŸ­ç·šäº¤æ˜“ã€åŠ å¯†è²¨å¹£ã€æ–°å‰µæŠ•è³‡ã€‚</p>
                <p>ğŸ” æŠ•è³‡ç†è²¡å»ºè­°ï¼š</p>
                <p>éˆæ´»æ‡‰è®Šèˆ‡å¿«é€Ÿæ±ºç­–æ˜¯å„ªå‹¢ï¼Œä½†ç©©å¥çš„é¢¨éšªæ§ç®¡èƒ½è®“æŠ•è³‡æ›´é•·é ï¼›å»ºè­°è¨­å®šæ˜ç¢ºçš„åœæèˆ‡ç²åˆ©ç›®æ¨™ï¼Œé¿å…å› å¸‚å ´æ³¢å‹•è€Œæƒ…ç·’åŒ–äº¤æ˜“ï¼ŒåŒæ™‚é©åº¦åˆ†é…éƒ¨åˆ†è³‡é‡‘è‡³ç©©å¥å‹è³‡ç”¢ï¼Œå¦‚ ETF æˆ–å‚µåˆ¸ï¼Œä»¥å¹³è¡¡æŠ•è³‡çµ„åˆï¼Œç¢ºä¿åœ¨è¿½æ±‚é«˜å ±é…¬çš„åŒæ™‚ï¼Œç¶­æŒè³‡ç”¢ç©©å®šå¢é•·ã€‚</p>
            </div>
        </div>

        <div class="footer">ä»¥ä¸Šæ¸¬é©—çµæœåƒ…ä¾›åƒè€ƒï¼
        @zoecreation</div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
// *** é¡Œç›®å·²æ›¿æ›ç‚º 21 é¡Œå°ˆæ¥­æŠ•è³‡æƒ…å¢ƒé¡Œï¼Œä¸”é¸é …ä¸å¸¶æ¨™ç±¤ ***
const questions = [
// --- E (å‘å¤–æ¢ç´¢/å…±è­˜) vs I (å‘å…§ç¨ç«‹/æ€è€ƒ) --- (6 é¡Œ)
    {q:"1. å¦‚ä½•ç¢ºèªæ½›åœ¨æŠ•è³‡çš„åƒ¹å€¼ï¼Ÿ", a:["A. èˆ‡å¤šä½åˆ†æå¸«ã€ç†å°ˆæˆ–æŠ•è³‡ç•Œæœ‹å‹è¨è«–ï¼Œè½å–ä»–å€‘å°å¸‚å ´çš„çœ‹æ³•ã€‚","B. ç¨ç«‹æ’°å¯«ä¸€ä»½è©³ç´°ç ”ç©¶å ±å‘Šï¼Œä¸è®“å¤–éƒ¨æ„è¦‹å½±éŸ¿è‡ªå·±çš„çµè«–ã€‚"], dim:"EI"},
    {q:"2. ç•¶å¸‚å ´å‡ºç¾æ–°è¶¨å‹¢ï¼Œä½ çš„ç¬¬ä¸€åæ‡‰æ˜¯ï¼Ÿ", a:["A. ç«‹å³åƒèˆ‡ç›¸é—œçš„ç·šä¸Šè¨è«–å€æˆ–ç¤¾ç¾¤ï¼Œäº†è§£å¤§çœ¾çš„é›†é«”æƒ…ç·’å’Œçœ‹æ³•ã€‚","B. ä¿æŒè§€å¯Ÿï¼Œå…ˆé—œé–‰æ‰€æœ‰å™ªéŸ³ï¼Œéœéœåœ°æ€è€ƒå…¶å°æˆ‘çš„æŠ•è³‡çµ„åˆçš„æ½›åœ¨å½±éŸ¿ã€‚"], dim:"EI"},
    {q:"3. ä½ åœ¨æŠ•è³‡äº¤æµæœƒä¸Šæœ€å–œæ­¡åšä»€éº¼ï¼Ÿ", a:["A. èˆ‡åœ¨å ´çš„å°ˆå®¶æˆ–é™Œç”ŸæŠ•è³‡è€…å»ºç«‹äººè„ˆä¸¦äº¤æ›å³æ™‚è³‡è¨Šã€‚","B. æ‰¾åˆ°ä¸€å€‹å®‰éœçš„è§’è½ï¼Œå°ˆå¿ƒè½å–ä¸»è¬›è€…çš„æ·±åº¦å…§å®¹ä¸¦åšç­†è¨˜ã€‚"], dim:"EI"},
    {q:"4. å¦‚æœä½ çš„æ ¸å¿ƒæŒè‚¡çªç„¶æš´è·Œï¼Œä½ æœƒï¼Ÿ", a:["A. å°‹æ±‚å°ˆæ¥­é¡§å•çš„æ„è¦‹ï¼Œæˆ–åœ¨è«–å£‡ä¸Šå°‹æ‰¾ã€ŒæŠ„åº•ã€æˆ–ã€Œé€ƒå‘½ã€çš„å…±è­˜ã€‚","B. ç¨è‡ªé‡è®€ç•¶åˆçš„è²·å…¥é‚è¼¯ï¼Œè©•ä¼°åŸºæœ¬é¢æ˜¯å¦æ”¹è®Šï¼Œä¸¦åšå‡ºç¨ç«‹æ±ºå®šã€‚"], dim:"EI"},
    {q:"5. ä½ æ›´å–œæ­¡å“ªç¨®æŠ•è³‡ç’°å¢ƒï¼Ÿ", a:["A. æ´»èºã€å……æ»¿è¨è«–å’Œè³‡è¨Šå…±äº«çš„å¸‚å ´æ°›åœã€‚","B. æ³¢å‹•å°ã€å¯ä»¥å°ˆæ³¨æ–¼ç ”ç©¶å’ŒåŸ·è¡Œæ—¢å®šè¨ˆç•«çš„å®‰éœç’°å¢ƒã€‚"], dim:"EI"},
    {q:"6. ä½ å¦‚ä½•åˆ†é…ä½ çš„ç ”ç©¶æ™‚é–“ï¼Ÿ", a:["A. å¤§éƒ¨åˆ†æ™‚é–“ç”¨æ–¼é–±è®€æ–°èã€å ±å‘Šã€å’Œè¿½è¹¤KOLçš„åˆ†æã€‚","B. å¤§éƒ¨åˆ†æ™‚é–“ç”¨æ–¼é–±è®€è²¡å ±åŸæ–‡ä»¶ã€å­¸è¡“è«–æ–‡æˆ–é€²è¡Œæ¨¡å‹æ¨¡æ“¬ã€‚"], dim:"EI"},

    // --- S (å…·é«”äº‹å¯¦/å¯¦å‹™) vs N (æ½›åœ¨è¶¨å‹¢/æ¦‚å¿µ) --- (5 é¡Œ)
    {q:"7. æŠ•è³‡ä¸€å®¶æ–°å‰µç§‘æŠ€å…¬å¸ï¼Œä½ çš„é‡é»åœ¨æ–¼ï¼Ÿ", a:["A. è©•ä¼°å…¶ç¾æœ‰çš„å°ˆåˆ©ã€åˆç´„å’Œéå»å…­å€‹æœˆçš„ç‡Ÿæ”¶å¢é•·ç­‰æ•¸æ“šã€‚","B. æƒ³åƒå…¶ç”¢å“åœ¨äº”å¹´å¾Œå°ç”¢æ¥­éˆçš„é¡›è¦†æ€§ï¼ŒåŠå…¶æœªä¾†çš„å¸‚å ´è¦æ¨¡ã€‚"], dim:"SN"},
    {q:"8. è©•ä¼°ä¸€æª”é«˜è‚¡æ¯ ETF æ™‚ï¼Œä½ æœ€å…ˆçœ‹é‡ï¼Ÿ", a:["A. éå»ä¸‰å¹´çš„å¯¦éš›é…æ¯ç´€éŒ„ã€æ®–åˆ©ç‡æ•¸å­—å’Œè²»ç”¨ç‡ç­‰å…·é«”äº‹å¯¦ã€‚","B. è©² ETF è¿½è¹¤çš„ç”¢æ¥­æ˜¯å¦ç¬¦åˆæœªä¾†äººå£çµæ§‹è®Šé·æˆ–æŠ€è¡“è¶¨å‹¢ã€‚"], dim:"SN"},
    {q:"9. ä½ çœ‹åˆ°ä¸€å€‹è¤‡é›œçš„æŠ€è¡“åˆ†æåœ–è¡¨ï¼Œä½ æœƒï¼Ÿ", a:["A. ä»”ç´°æ¨™è¨˜æ¯ä¸€å€‹æ”¯æ’ä½ã€å£“åŠ›ä½ï¼Œä¸¦ç”¨æŒ‡æ¨™ç¢ºèªç•¶å‰çš„è²·è³£ä¿¡è™Ÿã€‚","B. è©¦åœ–å¾ç·šæ¢å’Œå½¢æ…‹ä¸­ï¼Œæ„Ÿå—å¸‚å ´å¤§è³‡é‡‘æ­£åœ¨ã€Œé†é‡€ã€ä»€éº¼æ¨£çš„è¶¨å‹¢ã€‚"], dim:"SN"},
    {q:"10. é—œæ–¼ã€Œå…ƒå®‡å®™ã€æˆ–ã€ŒAIé©å‘½ã€ç­‰å®è§€æ¦‚å¿µï¼Œä½ çš„æ…‹åº¦æ˜¯ï¼Ÿ", a:["A. é™¤éçœ‹åˆ°æ˜ç¢ºçš„å•†æ¥­è½åœ°å’Œå¯è§€çš„ç¾é‡‘æµï¼Œå¦å‰‡æŒè§€æœ›æ…‹åº¦ã€‚","B. ç›¸ä¿¡é€™ä»£è¡¨äº†äººé¡æ–‡æ˜çš„èºé€²ï¼Œé¡˜æ„ç¾åœ¨å°±æŠ•å…¥ç›¸é—œæ¦‚å¿µè‚¡ã€‚"], dim:"SN"},
    {q:"11. å“ªç¨®å ±å‘Šå°ä½ çš„æŠ•è³‡æ›´æœ‰å¯¦è³ªå¹«åŠ©ï¼Ÿ", a:["A. é—œæ–¼ç•¶å‰ä¼æ¥­è²¡å ±çš„æ·±åº¦è§£è®€å’Œç›ˆé¤˜æ•¸å­—åˆ†æã€‚","B. é—œæ–¼æœªä¾†åå¹´å…¨çƒç¶“æ¿Ÿçµæ§‹æ¼”è®Šå’Œæ–°èˆˆç§‘æŠ€æ½›èƒ½çš„é æ¸¬ã€‚"], dim:"SN"},

    // --- T (ç†æ€§åˆ†æ/å®¢è§€) vs F (æƒ…æ„Ÿåƒ¹å€¼/ä¸»è§€) --- (5 é¡Œ)
    {q:"12. å¿…é ˆè³£å‡ºä¸€æª”è®“ä½ ç²åˆ©è±åšçš„æŒè‚¡ï¼Œä½†ä½ å°è©²å…¬å¸æœ‰å¼·çƒˆæƒ…æ„ŸèªåŒï¼Œä½ æœƒï¼Ÿ", a:["A. åš´æ ¼éµå¾ªäº‹å…ˆè¨­å®šçš„è³£å‡ºæ¢ä»¶ï¼ˆä¾‹å¦‚ä¼°å€¼éé«˜ï¼‰ï¼Œä¸å—æƒ…æ„Ÿå½±éŸ¿ã€‚","B. å³ä½¿é”åˆ°è³£é»ï¼Œä¹Ÿæœƒå› ç‚ºæƒ…æ„Ÿæˆ–å¸Œæœ›å…¶èƒ½ã€Œèµ°æ›´é ã€è€ŒçŒ¶è±«ä¸æ±ºã€‚"], dim:"TF"},
    {q:"13. ä½ çš„æœ‹å‹å› è¼•ä¿¡å°é“æ¶ˆæ¯è€ŒæŠ•è³‡å¤±åˆ©ï¼Œä½ æœƒå¦‚ä½•å›æ‡‰ï¼Ÿ", a:["A. åˆ†æå…¶æ±ºç­–éç¨‹ä¸­çš„é‚è¼¯æ¼æ´ï¼Œä¸¦æä¾›ä¸€å¥—æ›´ç†æ€§çš„åˆ†ææ¡†æ¶ã€‚","B. å°ˆæ³¨æ–¼å®‰æ…°ä»–å€‘çš„æƒ…ç·’ï¼Œé¼“å‹µä»–å€‘å¾éŒ¯èª¤ä¸­èµ°å‡ºä¾†ï¼Œä¸¦è¡¨é”æ”¯æŒã€‚"], dim:"TF"},
    {q:"14. æŠ•è³‡ã€ŒESG åŸºé‡‘ã€æ™‚ï¼Œå¦‚æœå…¶æ”¶ç›Šä½æ–¼å¸‚å ´å¹³å‡ï¼Œä½ æœƒï¼Ÿ", a:["A. é‡æ–°è©•ä¼°å…¶é¢¨éšªèª¿æ•´å¾Œçš„å ±é…¬ç‡ï¼ˆSharpe Ratioï¼‰ï¼Œçœ‹æ˜¯å¦å€¼å¾—çŠ§ç‰²å›å ±ã€‚","B. èªç‚ºé€™æ˜¯ç‚ºäº†æ”¯æŒç¤¾æœƒåƒ¹å€¼æ‰€åšçš„çŠ§ç‰²ï¼Œåªè¦å¿ƒå®‰ç†å¾—å°±å¯ä»¥ç¹¼çºŒæŒæœ‰ã€‚"], dim:"TF"},
    {q:"15. ä»€éº¼æœƒè®“ä½ åšå‡ºæœ€ç³Ÿç³•çš„æŠ•è³‡æ±ºç­–ï¼Ÿ", a:["A. æ•¸æ“šåˆ†æéŒ¯èª¤ã€é‹ç®—æ¨¡å‹å‡ºéŒ¯æˆ–å°å¸‚å ´é‚è¼¯åˆ¤æ–·å¤±èª¤ã€‚","B. å±ˆæœæ–¼å¸‚å ´çš„ææ‡¼æˆ–è²ªå©ªæƒ…ç·’ï¼Œæˆ–å› è¡å‹•è€Œè²·å…¥æˆ–è³£å‡ºã€‚"], dim:"TF"},
    {q:"16. æŠ•è³‡çµ„åˆä¸­æœ‰ä¸€æª”æ˜æ˜Ÿè‚¡ï¼Œå…¶ CEO å‚³å‡ºé“å¾·çˆ­è­°ï¼Œä½ æœƒï¼Ÿ", a:["A. è©•ä¼°äº‹ä»¶å°å…¬å¸è²¡å‹™å’Œç‡Ÿé‹çš„å¯¦éš›å½±éŸ¿ï¼Œå¿½ç•¥é“å¾·å±¤é¢ã€‚","B. å³ä½¿è²¡å‹™ç„¡è™ï¼Œä¹Ÿæœƒå› å…¶é“å¾·ç‘•ç–µè€Œè€ƒæ…®è³£å‡ºï¼Œå› ç‚ºé•èƒŒå€‹äººåƒ¹å€¼è§€ã€‚"], dim:"TF"},

    // --- J (åˆ¤æ–·è¦åŠƒ/æ§åˆ¶) vs P (çŸ¥è¦ºå½ˆæ€§/é–‹æ”¾) --- (5 é¡Œ)
    {q:"17. åœ¨é–‹å§‹ä¸€ç­†æ–°çš„æŠ•è³‡å‰ï¼Œä½ æ›´åå¥½ï¼Ÿ", a:["A. äº‹å…ˆè¨­å®šå¥½æ˜ç¢ºçš„è²·å…¥åƒ¹ã€è³£å‡ºåƒ¹å’Œåœæé»ï¼Œä¸¦å¯«å…¥ç³»çµ±ã€‚","B. è¨­å®šä¸€å€‹å¤§è‡´çš„åƒ¹æ ¼ç¯„åœï¼Œä½†ä¿ç•™å½ˆæ€§ï¼Œæ ¹æ“šå¸‚å ´çš„å³æ™‚æƒ…æ³èª¿æ•´ã€‚"], dim:"JP"},
    {q:"18. ä½ çš„æŠ•è³‡çµ„åˆæ¯å¹´æœƒã€Œå†å¹³è¡¡ã€å¹¾æ¬¡ï¼Ÿ", a:["A. åš´æ ¼æŒ‰ç…§å¹´åˆåˆ¶å®šçš„æ™‚é–“è¡¨ï¼ˆä¾‹å¦‚æ¯å­£æˆ–æ¯å¹´ä¸€æ¬¡ï¼‰ã€‚","B. åªæœ‰ç•¶å¸‚å ´å‡ºç¾æ¥µç«¯æ³¢å‹•æˆ–æœ‰æ–°çš„æŠ•è³‡æ©Ÿæœƒå‡ºç¾æ™‚æ‰é€²è¡Œã€‚"], dim:"JP"},
    {q:"19. äº¤æ˜“è»Ÿé«”çªç„¶é¡¯ç¤ºä¸€å€‹å¼·çƒˆçš„è²·å…¥ä¿¡è™Ÿï¼Œä½†ä¸åœ¨ä½ çš„è¨ˆç•«å…§ï¼Œä½ æœƒï¼Ÿ", a:["A. å¿½ç•¥å®ƒï¼Œå …æŒåªåŸ·è¡Œäº‹å…ˆç¶“éé©—è­‰çš„äº¤æ˜“è¨ˆç•«ã€‚","B. è¿…é€Ÿè©•ä¼°ä¿¡è™Ÿçš„å¯ä¿¡åº¦ï¼Œä¸¦å¯èƒ½ç«‹å³æ¡å–è¡Œå‹•æŠ“ä½æ©Ÿæœƒã€‚"], dim:"JP"},
    {q:"20. ä½ çš„ç›®æ¨™æ˜¯ç´¯ç© 1000 è¬å…ƒï¼Œä½ çš„æ–¹å¼æ˜¯ï¼Ÿ", a:["A. ç²¾ç¢ºè¨ˆç®—æ¯å€‹æœˆçš„å„²è“„å’ŒæŠ•è³‡å›å ±ç‡ï¼Œç„¶å¾Œåš´æ ¼åŸ·è¡Œæ­¤è¨ˆç•«ã€‚","B. è¨­å®šä¸€å€‹å¤§è‡´ç›®æ¨™ï¼Œä½†å…è¨±è‡ªå·±éˆæ´»èª¿æ•´ï¼Œé †æ‡‰å¸‚å ´è®ŠåŒ–ä¾†åŠ é€Ÿæˆ–æ”¾ç·©ã€‚"], dim:"JP"},
    {q:"21. é‡åˆ°æŠ•è³‡æ›¸ç±èˆ‡å¸‚å ´ç¾æ³è¡çªæ™‚ï¼Œä½ æœƒï¼Ÿ", a:["A. ç›¸ä¿¡ç¶“å…¸ç†è«–çš„é•·æœŸæœ‰æ•ˆæ€§ï¼Œå …æŒåŸå‰‡ï¼Œç­‰å¾…å¸‚å ´å›æ­¸ç†æ€§ã€‚","B. è¿…é€Ÿèª¿æ•´æ€è·¯ï¼Œæ¥å—ç•¶å‰çš„å¸‚å ´ç’°å¢ƒï¼Œä¸¦éˆæ´»æ”¹è®Šç­–ç•¥ã€‚"], dim:"JP"},
];
    
const mbtiData = {
    "ISTJ":"åš´è¬¹ã€æœ‰ç´€å¾‹ï¼Œåå¥½è¨ˆç•«æ€§äº¤æ˜“ï¼Œè¿½æ±‚å®‰å…¨ç©©å®šã€‚",
    "ISFJ":"è¬¹æ…ã€ç´°å¿ƒï¼Œæœƒä»”ç´°åˆ†æå¸‚å ´è³‡è¨Šï¼Œé¿å…è¡å‹•æ“ä½œã€‚",
    "INFJ":"å‰ç»æ€§å¼·ï¼Œæ³¨é‡ç­–ç•¥èˆ‡é¢¨éšªæ§åˆ¶ï¼Œå–œæ­¡æ·±å…¥ç ”ç©¶å¸‚å ´è¶¨å‹¢ã€‚",
    "INTJ":"ç­–ç•¥å‹æ€ç¶­ï¼Œå–„æ–¼åˆ¶å®šé•·æœŸäº¤æ˜“è¨ˆç•«ï¼Œæ³¨é‡æ•ˆç‡èˆ‡é¢¨éšªç®¡ç†ã€‚",
    "ISTP":"éˆæ´»ã€å¯¦éš›ï¼Œå–œæ­¡å³æ™‚åæ‡‰å¸‚å ´è®ŠåŒ–ï¼Œåå¥½çŸ­ç·šæ“ä½œã€‚",
    "ISFP":"ä¿å®ˆã€ç©©å®šï¼Œæ³¨é‡ç›´è¦ºèˆ‡æ„Ÿå—ï¼Œå–œæ­¡ä½é¢¨éšªäº¤æ˜“ã€‚",
    "INFP":"ç†æƒ³ä¸»ç¾©ã€ç¨ç«‹æ€è€ƒï¼Œå–œæ­¡æ¢ç´¢æ–°å¸‚å ´æˆ–æ–°ç­–ç•¥ã€‚",
    "INTP":"åˆ†æèƒ½åŠ›å¼·ï¼Œå–œæ­¡ç ”ç©¶è¤‡é›œæ•¸æ“šèˆ‡ç­–ç•¥ï¼Œè¿½æ±‚å‰µæ–°äº¤æ˜“æ–¹æ³•ã€‚",
    "ESTP":"è¡Œå‹•æ´¾ï¼Œå¿«é€Ÿåˆ¤æ–·å¸‚å ´è¨Šè™Ÿï¼Œåå¥½å³æ™‚äº¤æ˜“æˆ–æ³¢æ®µæ“ä½œã€‚",
    "ESFP":"å¤–å‘ã€éˆæ´»ï¼Œå–œæ­¡è·Ÿå¸‚å ´äº’å‹•ï¼Œåå¥½æ³¢æ®µèˆ‡çŸ­ç·šæ“ä½œã€‚",
    "ENFP":"å‰µæ„åè¶³ï¼Œå–„æ–¼æ•æ‰æ–°èˆˆå¸‚å ´æ©Ÿæœƒï¼Œå–œæ­¡å¤šå…ƒç­–ç•¥ã€‚",
    "ENTP":"æ©Ÿæ™ºã€å¥½æŒ‘æˆ°ï¼Œå–œæ­¡å‰µæ–°äº¤æ˜“å·¥å…·èˆ‡è¡ç”Ÿæ€§å•†å“æ“ä½œã€‚",
    "ESTJ":"æ¶æ§‹æ¸…æ™°ï¼Œå–„æ–¼è¦åŠƒï¼Œåå¥½è—ç±Œã€ç©©å¥å‹äº¤æ˜“ã€‚",
    "ESFJ":"ç¤¾äº¤å‹ï¼Œæœƒåƒè€ƒä»–äººè³‡è¨Šèˆ‡å¸‚å ´æ°›åœï¼Œå‚¾å‘ä¿å®ˆæ“ä½œã€‚",
    "ENFJ":"ç­–ç•¥å‹é ˜å°ï¼Œæœƒç¶œåˆè³‡è¨Šæ±ºç­–ï¼Œå–œæ­¡åˆ†æ•£å¸ƒå±€é™ä½é¢¨éšªã€‚",
    "ENTJ":"æœæ–·ã€ç›®æ¨™å°å‘ï¼Œå–œæ­¡ç³»çµ±åŒ–åˆ†æï¼Œå–„æ–¼æŒæ§äº¤æ˜“ç¯€å¥ã€‚"
};

let current=0;
let answers=[];
let myPieChart = null; // æ–°å¢ï¼šç”¨æ–¼å„²å­˜ Chart å¯¦ä¾‹

function startQuiz(){
    document.getElementById("start-screen").style.display="none";
    document.getElementById("quiz").style.display="block";
    showQuestion();
}

function showQuestion(){
    const q=questions[current];
    document.getElementById("question-text").textContent=q.q;
    const optionsDiv=document.getElementById("options");
    optionsDiv.innerHTML="";
    q.a.forEach((opt,index)=>{
        const btn=document.createElement("button");
        btn.textContent=opt;
        // ä¿®æ­£ï¼šå¦‚æœå·²ç¶“é¸æ“‡éï¼Œå‰‡åŠ ä¸Šé¸ä¸­æ¨£å¼
        if(answers[current] === index) {
            btn.style.backgroundColor = '#2c3e50';
        }
        btn.onclick=()=>selectAnswer(index);
        optionsDiv.appendChild(btn);
    });
    document.getElementById("prev-btn").style.display = current>0?"inline-block":"none";
    document.getElementById("next-btn").style.display="none";
    updateProgress();
}

function selectAnswer(choice){
    answers[current]=choice;
    // ä¿®æ­£ï¼šæ›´æ–°æŒ‰éˆ•ç‹€æ…‹
    document.querySelectorAll('#options button').forEach((btn, index) => {
        btn.style.backgroundColor = index === choice ? '#2c3e50' : '#3498db';
    });

    // å¦‚æœæ˜¯æœ€å¾Œä¸€é¡Œï¼Œç›´æ¥é¡¯ç¤ºçµæœ
    if(current===questions.length-1){
        showResult();
    }
    // å¦å‰‡ï¼Œå»¶é²å¾Œè·³ä¸‹ä¸€é¡Œ
    setTimeout(()=>{
        if(current < questions.length-1){
            current++;
            showQuestion();
        }
    }, 200); // å»¶é² 200 æ¯«ç§’
}

function prevQuestion(){
    if(current>0){
        current--;
        showQuestion();
    }
}

function nextQuestion(){
    if(current<questions.length-1){
        current++;
        showQuestion();
    }
}

function updateProgress(){
    const percent=Math.round(((current+1)/questions.length)*100);
    const progressBar=document.getElementById("progress");
    progressBar.style.width=percent+"%";
    progressBar.textContent=percent+"%";
}

function showResult(){
    document.getElementById("quiz").style.display="none";
    const resDiv=document.getElementById("result");
    resDiv.style.display="block";

    // è¨ˆç®—å„ç¶­åº¦åˆ†æ•¸
    const dims = {E:0,I:0,S:0,N:0,T:0,F:0,J:0,P:0};
    questions.forEach((q,i)=>{
        // ç¢ºä¿å•é¡Œæœ‰è¢«å›ç­”
        if(answers[i] !== undefined) {
            const val = answers[i];
            // A é¸é … (index 0) å°æ‡‰ç¬¬ä¸€å€‹å­—æ¯ (E, S, T, J)
            switch(q.dim){
                case "EI": val===0?dims.E++:dims.I++; break;
                case "SN": val===0?dims.S++:dims.N++; break;
                case "TF": val===0?dims.T++:dims.F++; break;
                case "JP": val===0?dims.J++:dims.P++; break;
            }
        }
    });

    const mbti =
        (dims.E>=dims.I?"E":"I") +
        (dims.S>=dims.N?"S":"N") +
        (dims.T>=dims.F?"T":"F") +
        (dims.J>=dims.P?"J":"P");

    document.getElementById("mbti-type").textContent="ä½ çš„ MBTI: "+mbti;
    document.getElementById("mbti-desc").textContent=mbtiData[mbti];

    // --- åœ“é¤…åœ–/é•·æ¢åœ–è¨ˆç®—é‚è¼¯ (æ ¹æ“š 21 é¡Œçš„ç¶­åº¦åˆ†å¸ƒç¸½åˆ†è¨ˆç®—ç™¾åˆ†æ¯”) ---
    if(myPieChart) {
        myPieChart.destroy(); // éŠ·æ¯€èˆŠåœ–è¡¨ï¼Œé¿å…é‡è¤‡æ¸²æŸ“å•é¡Œ
    }

    // å„ç¶­åº¦çš„ç¸½é¡Œæ•¸ï¼šEI: 6, SN: 5, TF: 5, JP: 5
    const totalEI = dims.E + dims.I; 
    const totalSN = dims.S + dims.N; 
    const totalTF = dims.T + dims.F; 
    const totalJP = dims.J + dims.P; 

    // è¨ˆç®— I, N, F, P çš„ç™¾åˆ†æ¯” (I/E+I, N/S+N, F/T+F, P/J+P)
    const pieData = [
        totalEI > 0 ? Math.round((dims.I / totalEI) * 100) : 50, // I
        totalSN > 0 ? Math.round((dims.N / totalSN) * 100) : 50, // N
        totalTF > 0 ? Math.round((dims.F / totalTF) * 100) : 50, // F
        totalJP > 0 ? Math.round((dims.P / totalJP) * 100) : 50, // P
    ];

    const ctx=document.getElementById("pieChart").getContext("2d");
    myPieChart = new Chart(ctx,{ // å„²å­˜æ–°çš„ Chart å¯¦ä¾‹
        type:'pie',
        data:{
            labels:['å…§å‘ (I)','ç›´è¦º (N)','æƒ…æ„Ÿ (F)','çŸ¥è¦º (P)'],
            datasets:[{
                data:pieData,
                backgroundColor:['#2980b9','#27ae60','#f39c12','#d35400'] // å°æ‡‰ I N F P é¡è‰²
            }]
        },
        options:{
            responsive:true,
            maintainAspectRatio: false, 
            plugins:{
                legend:{position:'bottom'},
                tooltip:{callbacks:{label:function(context){return context.label+": "+context.raw+"%";}}}
            },
            animation:{animateScale:true, animateRotate:true, duration:1500}
        }
    });

    // åœ–è¡¨è§£èªª
    const descDiv = document.getElementById("chart-desc");
    const labels = ['E/I','S/N','T/F','J/P'];
    const meanings = [
        'E/I: å¤–å‘ (E) / å…§å‘ (I)',
        'S/N: æ„Ÿè¦º (S) / ç›´è¦º (N)',
        'T/F: æ€è€ƒ (T) / æƒ…æ„Ÿ (F)',
        'J/P: åˆ¤æ–· (J) / çŸ¥è¦º (P)'
    ];
    let html = "<h3>åœ–è¡¨è§£èªªï¼ˆæ¯”ä¾‹é¡¯ç¤ºå¦‚ä¸‹ï¼‰ï¼š</h3><ul>";
    labels.forEach((label,i)=>{
        html += `<li><b>${label}</b> (${meanings[i]})</li>`;
    });
    html += "</ul>";
    descDiv.innerHTML = html;

    // --- æ©«å‘æ¢å½¢åœ–ä¿®æ­£ START ---
    const barsDiv = document.getElementById("chart-bars");
    barsDiv.innerHTML="";
    const horizontalPairs = [['E','I'], ['S','N'], ['T','F'], ['J','P']];
    const colors = {E:'#3498db', I:'#2980b9', S:'#2ecc71', N:'#27ae60', T:'#f1c40f', F:'#f39c12', J:'#e67e22', P:'#d35400'};
    horizontalPairs.forEach(([a,b])=>{
        const total = dims[a]+dims[b];
        const aPct = total>0 ? Math.round((dims[a]/total)*100) : 50;
        const bPct = 100 - aPct;

        const labelDiv = document.createElement("div");
        labelDiv.className="bar-label";
        labelDiv.textContent = `${a}: ${aPct}%   ${b}: ${bPct}%`;
        barsDiv.appendChild(labelDiv);

        const bar = document.createElement("div");
        bar.className="bar-container";

        const barA = document.createElement("div");
        barA.className="bar-segment";
        barA.style.width = aPct + "%"; barA.style.backgroundColor = colors[a];
        barA.innerHTML = aPct > 10 ? `<span>${a}</span>` : ''; 

        const barB = document.createElement("div");
        barB.className="bar-segment";
        barB.style.width = bPct + "%"; barB.style.backgroundColor = colors[b];
        barB.innerHTML = bPct > 10 ? `<span>${b}</span>` : ''; 

        bar.appendChild(barA); bar.appendChild(barB);
        barsDiv.appendChild(bar);
    });
    // --- æ©«å‘æ¢å½¢åœ–ä¿®æ­£ END ---

    // æŠ•è³‡äººæ ¼åˆ†æï¼šæ ¹æ“šMBTIçµæœï¼Œé¡¯ç¤ºç›¸æ‡‰çš„åˆ†æ
    const analysisGroups = document.querySelectorAll('#investment-analysis .analysis-group');
    analysisGroups.forEach(group => {
        const mbtiTypes = group.getAttribute('data-mbti').split(',');
        if (mbtiTypes.includes(mbti)) {
            group.style.display = 'block'; 
        } else {
            group.style.display = 'none'; 
        }
    });

}

// æŒ‰éˆ•åŠŸèƒ½
function restartQuiz(){
    // é‡æ–°è¼‰å…¥å‰å…ˆæ¸…ç† Chart å¯¦ä¾‹
    if(myPieChart) {
        myPieChart.destroy();
        myPieChart = null;
    }
    location.reload();
}

function downloadResult(){
    // ç¢ºä¿ html2canvas å·²è¼‰å…¥
    if (typeof html2canvas === 'function') {
        html2canvas(document.getElementById("result")).then(canvas=>{
            const link = document.createElement("a");
            link.download = "MBTI_Result.png";
            link.href = canvas.toDataURL();
            link.click();
        });
    } else {
        alert("ä¸‹è¼‰åŠŸèƒ½éœ€è¦ html2canvas è…³æœ¬æ”¯æ´ï¼Œè«‹ç¢ºèªè…³æœ¬å·²æ­£ç¢ºè¼‰å…¥ã€‚");
    }
}
function openLine(){ window.open("https://lin.ee/FmPO1Vz","_blank"); }

// åˆå§‹åŒ–ï¼šä¸€é–‹å§‹æ‰€æœ‰åˆ†æå€å¡Šæ‡‰ç‚ºéš±è—
document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('#investment-analysis .analysis-group').forEach(group => {
        group.style.display = 'none';
    });
});
</script>
<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
</body>
</html>
